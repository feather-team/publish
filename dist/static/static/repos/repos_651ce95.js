define("static/repos/repos.js",function(e,t,s){var o=e("components/vue/vue.js"),r=e("widget/tasks/tasks.js"),n=e("components/jquery/jquery.js");e("components/bootstrap/js/bootstrap.js"),e("components/vue-resource/vue-resource.js"),s.exports=new o({el:"#repo-container",data:{column:3,row:5,isLoading:!1,repo_btn:"添加",show_errmsg:!1,repo_errmsg:"",repo_address:"",groups:{}},ready:function(){var e=this;e.fetchRepos(),r.$on("update",function(){e.fetchRepos()})},methods:{fetchRepos:function(){this.$http.get("/repo/list").then(function(e){return e.json()}).then(function(e){0==e.code?this.organizeRepos(e.data):alert(res.message||"未知错误")})},getObjectLen:function(e){var t=Object.keys(e);return t.length},organizeRepos:function(e){var t=0,s=0,o=this.getObjectLen(e);for(var r in e){switch(o%this.column){case 1:t==o-1&&(e[r].class="col-md-12");break;case 2:(t==o-1||t==o-2)&&(e[r].class="col-md-6");break;default:e[r].class="col-md-4"}if(s=this.getObjectLen(e[r].repos),s<this.row)for(var n=this.row-s;n>0;n--)e[r].repos["..."+n]={id:"hf-dev-1/...",group:"hf-dev-1",name:"...",repo:!0};t++}this.$set("groups",e)},addRepo:function(){if(this.repo_address){if(this.isLoading)return!1;this.$set("isLoading",!0),this.$set("repo_btn","Loading..."),this.$http.post("/repo/add",{address:this.repo_address}).then(function(e){return e.json()}).then(function(e){this.$set("isLoading",!1),this.$set("repo_btn","添加"),0==e.code?(this.fetchRepos(),this.$set("show_errmsg",!1)):(this.$set("show_errmsg",!0),this.$set("repo_errmsg",e.msg))})}},setDelRepo:function(e){n("#del-modal-submit").attr("data-repo",e.target.getAttribute("data-repo"))},delRepo:function(e){var t=e.target.getAttribute("data-repo");this.$http.post("/repo/del",{repo:t}).then(function(e){return e.json()}).then(function(e){0==e.code?this.fetchRepos():alert(e.msg)})}}})});